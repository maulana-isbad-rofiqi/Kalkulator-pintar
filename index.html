<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kaltain Premium • Login</title>
  <meta name="description" content="Target penjualan & dompet pribadi dengan login. Keren, cepat, private."/>

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&family=Space+Grotesk:wght@700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>

  <!-- Tailwind + Particles + Confetti -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/tsparticles-confetti@2.12.0/tsparticles.confetti.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tsparticles/preset-fireworks@2.12.0/tsparticles.preset.fireworks.min.js"></script>

  <style>
    body { font-family: 'Inter', sans-serif; margin: 0; overflow: hidden; }
    #particles-js { position: fixed; width: 100%; height: 100%; top: 0; left: 0; z-index: 1; }
    .glass { background: rgba(255,255,255,0.08); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.1); }
    .title { font-family: 'Space Grotesk', sans-serif; }
    .loading-screen { position: fixed; inset: 0; background: linear-gradient(135deg, #1e1b4b, #0f172a); z-index: 9999; display: flex; align-items: center; justify-content: center; flex-direction: column; transition: opacity 1s ease-out; }
    .loader { width: 120px; height: 120px; border: 6px solid #1e293b; border-top: 6px solid #8b5cf6; border-radius: 50%; animation: spin 1s linear infinite; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .skeleton { background: linear-gradient(90deg, #1e293b 25%, #334155 50%, #1e293b 75%); background-size: 200% 100%; animation: loading 1.5s infinite; }
    @keyframes loading { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
    .hidden { display: none !important; }
  </style>
</head>
<body class="bg-gradient-to-br from-purple-900 via-blue-900 to-teal-900 text-white min-h-screen">

  <!-- PARTICLE BACKGROUND -->
  <div id="particles-js"></div>

  <!-- LOADING SCREEN -->
  <div id="loading" class="loading-screen">
    <div class="loader"></div>
    <h1 class="title text-5xl font-black mt-8 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">Kaltain</h1>
    <p class="mt-4 text-xl opacity-80">Loading premium experience...</p>
  </div>

  <!-- LOGIN SCREEN -->
  <div id="loginScreen" class="fixed inset-0 z-50 flex items-center justify-center hidden">
    <div class="glass p-12 rounded-3xl shadow-2xl max-w-md w-full mx-4 border border-white/20">
      <h2 class="title text-5xl font-black text-center mb-8">Welcome</h2>
      <input type="text" id="username" placeholder="Username kamu" class="w-full p-5 rounded-xl glass mb-6 text-xl focus:outline-none focus:ring-4 focus:ring-purple-500"/>
      <input type="password" id="password" placeholder="Password (bebas)" class="w-full p-5 rounded-xl glass mb-8 text-xl focus:outline-none focus:ring-4 focus:ring-purple-500"/>
      <button onclick="login()" class="w-full bg-gradient-to-r from-purple-600 to-pink-600 py-6 rounded-xl font-bold text-2xl shadow-xl hover:shadow-2xl transform hover:scale-105 transition">
        MASUK
      </button>
      <p class="text-center mt-6 text-sm opacity-70">Cuma buat simpan data kamu sendiri</p>
    </div>
  </div>

  <!-- MAIN APP -->
  <div id="app" class="relative z-10 hidden">
    <div class="max-w-5xl mx-auto p-6">

      <!-- Header + Logout -->
      <div class="flex justify-between items-center mb-10">
        <h1 class="title text-6xl font-black bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">Kaltain</h1>
        <button onclick="logout()" class="glass px-6 py-3 rounded-full flex items-center gap-3 hover:bg-white/20">
          <span id="userDisplay"></span> Logout
        </button>
      </div>

      <!-- MENU -->
      <div id="menu" class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <button onclick="show('kalkulasi')" class="glass p-10 rounded-3xl text-center hover:scale-105 transition transform">
          <div class="text-7xl mb-4">Target</div>
          <div class="text-2xl font-bold">Kalkulasi Target</div>
        </button>
        <button onclick="show('dompet')" class="glass p-10 rounded-3xl text-center hover:scale-105 transition transform">
          <div class="text-7xl mb-4">Wallet</div>
          <div class="text-2xl font-bold">Dompet Saya</div>
        </button>
        <button onclick="show('sultan')" class="glass p-10 rounded-3xl text-center bg-gradient-to-r from-yellow-500/30 to-orange-600/30 col-span-full hover:scale-105 transition">
          <div class="text-7xl mb-4">Crown</div>
          <div class="text-3xl font-black">Area Sultan</div>
        </button>
      </div>

      <!-- KALKULASI TARGET -->
      <div id="kalkulasi" class="hidden mt-10 space-y-6">
        <h2 class="text-4xl font-black text-center mb-10">Hitung Target Penjualan</h2>
        <div class="grid md:grid-cols-2 gap-6">
          <input type="number" placeholder="Jumlah periode" id="jumlahPeriode" class="p-5 rounded-2xl glass"/>
          <select id="unit" class="p-5 rounded-2xl glass"><option>Bulan</option><option>Tahun</option></select>
          <input type="number" placeholder="Harga beli" id="hargaProduk" class="p-5 rounded-2xl glass"/>
          <input type="number" placeholder="Harga jual" id="hargaJual" class="p-5 rounded-2xl glass"/>
          <input type="number" placeholder="Biaya variabel" id="biayaVariabel" class="p-5 rounded-2xl glass"/>
          <input type="number" placeholder="Biaya operasional bulanan" id="biayaOperasional" class="p-5 rounded-2xl glass"/>
          <input type="number" placeholder="Potongan platform" id="potonganPlatform" class="p-5 rounded-2xl glass"/>
          <input type="number" placeholder="Target laba bersih" id="targetLaba" class="p-5 rounded-2xl glass"/>
        </div>
        <button onclick="hitungTarget()" class="w-full bg-gradient-to-r from-green-500 to-emerald-600 py-6 rounded-2xl font-black text-2xl">HITUNG SEKARANG</button>
        <pre id="hasilKalkulasi" class="hidden mt-8 p-8 bg-black/40 rounded-3xl text-green-300 font-mono"></pre>
        <button onclick="show('menu')" class="mt-6 text-yellow-400 text-xl">Kembali</button>
      </div>

      <!-- DOMPET -->
      <div id="dompet" class="hidden mt-10">
        <h2 class="text-4xl font-black text-center mb-10">Dompet Saya</h2>
        <div id="ringkasanDompet" class="grid grid-cols-3 gap-6 mb-10"></div>
        <div class="grid grid-cols-2 gap-8">
          <button onclick="tambah('pemasukan')" class="bg-gradient-to-br from-green-500 to-emerald-600 py-10 rounded-3xl font-black text-3xl shadow-2xl hover:scale-105 transition">+</button>
          <button onclick="tambah('pengeluaran')" class="bg-gradient-to-br from-red-500 to-rose-600 py-10 rounded-3xl font-black text-3xl shadow-2xl hover:scale-105 transition">-</button>
        </div>
        <button onclick="tampilRiwayat()" class="w-full mt-8 py-5 bg-white/10 rounded-2xl font-bold text-xl">Riwayat Transaksi</button>
        <div id="formTransaksi" class="hidden mt-8 space-y-6">
          <input type="number" id="jumlahTransaksi" placeholder="Jumlah" class="w-full p-6 rounded-2xl glass text-2xl"/>
          <input type="text" id="ketTransaksi" placeholder="Keterangan" class="w-full p-6 rounded-2xl glass text-2xl"/>
          <button onclick="simpan()" class="w-full bg-gradient-to-r from-cyan-500 to-purple-600 py-6 rounded-2xl font-black text-2xl">SIMPAN</button>
        </div>
        <div id="riwayatContainer" class="hidden mt-8 space-y-6"></div>
        <button onclick="show('menu')" class="mt-10 text-yellow-400 text-xl">Kembali</button>
      </div>

      <!-- SULTAN -->
      <div id="sultan" class="hidden text-center py-20">
        <h2 class="text-7xl font-black mb-10 bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent">SULTAN AREA</h2>
        <p class="text-2xl mb-12 opacity-90">Terima kasih sudah mendukung pengembangan Kaltain</p>
        <img src="https://i.postimg.cc/VNnw27W2/qris.png" alt="QRIS" class="mx-auto rounded-3xl shadow-2xl border-8 border-white/30 max-w-sm"/>
        <p class="mt-10 text-3xl font-bold">Builder: Itsbad</p>
        <button onclick="show('menu')" class="mt-16 bg-yellow-500 text-black px-16 py-6 rounded-full text-2xl font-black shadow-2xl hover:scale-110 transition">Kembali</button>
      </div>

    </div>
  </div>

<script>
// Loading & Particles
setTimeout(() => {
  document.getElementById('loading').style.opacity = '0';
  setTimeout(() => {
    document.getElementById('loading').classList.add('hidden');
    document.getElementById('loginScreen').classList.remove('hidden');
  }, 1000);
}, 2500);

tsParticles.load("particles-js", {
  preset: "fireworks",
  particles: { color: { value: ["#8b5cf6", "#ec4899", "#10b981"] }, opacity: { value: 0.8 } }
});

// Login System
let currentUser = null;
const USER_KEY = "kaltain_current_user";

function login() {
  const user = document.getElementById('username').value.trim();
  const pass = document.getElementById('password').value;
  if (!user || !pass) return alert("Isi username & password dulu bro");
  
  currentUser = user;
  localStorage.setItem(USER_KEY, user);
  document.getElementById('userDisplay').textContent = user;
  document.getElementById('loginScreen').classList.add('hidden');
  document.getElementById('app').classList.remove('hidden');
  updateRingkasan();
  confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
}

function logout() {
  if (confirm("Keluar dari akun ini?")) {
    localStorage.removeItem(USER_KEY);
    location.reload();
  }
}

// Cek login saat buka
if (localStorage.getItem(USER_KEY)) {
  currentUser = localStorage.getItem(USER_KEY);
  document.getElementById('userDisplay').textContent = currentUser;
  document.getElementById('loginScreen').classList.add('hidden');
  document.getElementById('app').classList.remove('hidden');
}

// Data per user
function getData() {
  const key = `kaltain_${currentUser}`;
  return JSON.parse(localStorage.getItem(key) || '{"transactions":[]}');
}
function saveData(data) {
  const key = `kaltain_${currentUser}`;
  localStorage.setItem(key, JSON.stringify(data));
}

// Semua fungsi lain sama seperti sebelumnya (kalkulasi, dompet, dll) → tinggal copy dari versi sebelumnya
// Untuk hemat tempat, saya singkat aja ya. Kamu tinggal ganti fungsi di bawah dengan yang dari versi sebelumnya:

function show(id) {
  ['menu','kalkulasi','dompet','sultan'].forEach(x => document.getElementById(x).classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
  if (id === 'dompet') updateRingkasan();
}

// Paste semua fungsi hitungTarget(), updateRingkasan(), tambah(), simpan(), tampilRiwayat() dari versi sebelumnya di sini
// (sama persis, cuma ganti load() → getData(), save() → saveData(data))

// Contoh updateRingkasan (sesuaikan):
function updateRingkasan() {
  const data = getData();
  // ... sama seperti sebelumnya
}

// Init
show('menu');
</script>
</body>
</html>
